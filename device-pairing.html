
<!DOCTYPE html>

<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>设备配对</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
<style>
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    @keyframes pulse-ring {
      0% { transform: scale(0.8); opacity: 0.8; }
      50% { transform: scale(1.2); opacity: 0.3; }
      100% { transform: scale(0.8); opacity: 0.8; }
    }
    @keyframes pulse-ring-delay {
      0% { transform: scale(0.9); opacity: 0.6; }
      50% { transform: scale(1.3); opacity: 0.2; }
      100% { transform: scale(0.9); opacity: 0.6; }
    }
    @keyframes spin-slow {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    .animate-pulse-ring { animation: pulse-ring 2s ease-in-out infinite; }
    .animate-pulse-ring-delay { animation: pulse-ring-delay 2s ease-in-out infinite 0.5s; }
    .animate-spin-slow { animation: spin-slow 3s linear infinite; }
    @keyframes slideIn {
      from { transform: translateY(10px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .animate-slide-in {
      animation: slideIn 0.4s ease-out forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-fade-in {
      animation: fadeIn 0.3s ease-out forwards;
    }
  </style>
</head>
<body class="bg-[#F2F2F7] min-h-screen flex justify-center items-center p-4">
<!-- iPhone 15 Pro Canvas -->
<div class="w-[375px] h-[812px] bg-[#F2F2F7] rounded-[3rem] shadow-2xl border-[8px] border-gray-900 overflow-hidden relative flex flex-col">
<!-- Status Bar -->
<div class="h-11 w-full flex justify-between items-center px-8 pt-4">
<span class="text-[15px] font-semibold text-black">9:41</span>
<div class="flex items-center space-x-1">
<span class="iconify text-black" data-icon="heroicons:signal-20-solid"></span>
<span class="iconify text-black" data-icon="heroicons:wifi-20-solid"></span>
<span class="iconify text-black" data-icon="heroicons:battery-100-20-solid"></span>
</div>
</div>
<!-- Header -->
<header class="h-14 flex items-center px-4 bg-[#F2F2F7]">
<a href="2-device.html" class="flex items-center text-blue-500">
<span class="iconify w-6 h-6" data-icon="heroicons:chevron-left-20-solid"></span>
<span class="text-[17px]">设备</span>
</a>
<h1 class="flex-1 text-center text-[17px] font-semibold pr-16">配对设备</h1>
</header>
<!-- Main Content -->
<main class="flex-1 overflow-y-auto hide-scrollbar px-4 pb-8 space-y-4">
<!-- Scanning Animation -->
<section class="animate-slide-in" style="animation-delay: 0.1s;" id="scanSection">
<div class="flex flex-col items-center py-8">
<!-- Radar Animation -->
<div class="relative w-40 h-40 flex items-center justify-center mb-6">
<!-- Pulse Rings -->
<div class="absolute inset-0 bg-blue-500/20 rounded-full animate-pulse-ring"></div>
<div class="absolute inset-4 bg-blue-500/30 rounded-full animate-pulse-ring-delay"></div>
<!-- Center Icon -->
<div class="relative w-20 h-20 bg-blue-500 rounded-full flex items-center justify-center shadow-lg shadow-blue-500/30">
<span class="iconify text-white text-4xl" data-icon="heroicons:signal-20-solid"></span>
</div>
<!-- Spinning Ring -->
<div class="absolute inset-0 animate-spin-slow">
<div class="absolute top-0 left-1/2 -translate-x-1/2 w-3 h-3 bg-blue-400 rounded-full"></div>
</div>
</div>
<h2 class="text-[20px] font-bold text-gray-900 mb-2">正在搜索设备...</h2>
<p class="text-[14px] text-gray-500 text-center px-8">请确保您的心率监测设备已开启蓝牙并处于配对模式</p>
</div>
</section>

<!-- Device Type Filter -->
<section class="animate-slide-in" style="animation-delay: 0.15s;">
<div class="flex gap-2 overflow-x-auto hide-scrollbar pb-2">
<button class="px-4 py-2 bg-blue-500 text-white rounded-full text-[13px] font-medium flex-shrink-0" onclick="filterDevices('all')">全部</button>
<button class="px-4 py-2 bg-white text-gray-600 rounded-full text-[13px] font-medium flex-shrink-0 shadow-sm" onclick="filterDevices('chest')">胸带式</button>
<button class="px-4 py-2 bg-white text-gray-600 rounded-full text-[13px] font-medium flex-shrink-0 shadow-sm" onclick="filterDevices('arm')">臂带式</button>
<button class="px-4 py-2 bg-white text-gray-600 rounded-full text-[13px] font-medium flex-shrink-0 shadow-sm" onclick="filterDevices('watch')">手表</button>
</div>
</section>

<!-- Discovered Devices -->
<section class="space-y-3 animate-slide-in" style="animation-delay: 0.2s;">
<div class="flex items-center justify-between px-1">
<h2 class="text-[13px] font-semibold text-gray-500 uppercase tracking-wider">发现的设备</h2>
<span class="text-[12px] text-blue-500 font-medium" id="deviceCount">3 个设备</span>
</div>
<div class="space-y-2" id="deviceList">
<!-- Device 1 - Polar H10 -->
<div class="bg-white rounded-2xl p-4 shadow-sm flex items-center justify-between cursor-pointer active:scale-[0.98] transition-transform" onclick="selectDevice(this, 'polar-h10')">
<div class="flex items-center gap-4">
<div class="relative">
<div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
<span class="iconify text-blue-600 text-2xl" data-icon="heroicons:cpu-chip-20-solid"></span>
</div>
<div class="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full flex items-center justify-center">
<span class="iconify text-white text-[8px]" data-icon="heroicons:signal-20-solid"></span>
</div>
</div>
<div>
<h3 class="font-semibold text-[16px] text-gray-900">Polar H10</h3>
<div class="flex items-center gap-2 mt-0.5">
<span class="text-[12px] text-gray-500">胸带式心率传感器</span>
<span class="text-[10px] bg-green-100 text-green-600 px-1.5 py-0.5 rounded-full font-medium">信号强</span>
</div>
</div>
</div>
<span class="iconify text-gray-300 text-xl" data-icon="heroicons:chevron-right-20-solid"></span>
</div>

<!-- Device 2 - Garmin HRM-Pro -->
<div class="bg-white rounded-2xl p-4 shadow-sm flex items-center justify-between cursor-pointer active:scale-[0.98] transition-transform" onclick="selectDevice(this, 'garmin-hrm')">
<div class="flex items-center gap-4">
<div class="relative">
<div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center">
<span class="iconify text-orange-600 text-2xl" data-icon="heroicons:cpu-chip-20-solid"></span>
</div>
<div class="absolute -bottom-1 -right-1 w-4 h-4 bg-yellow-500 border-2 border-white rounded-full flex items-center justify-center">
<span class="iconify text-white text-[8px]" data-icon="heroicons:signal-20-solid"></span>
</div>
</div>
<div>
<h3 class="font-semibold text-[16px] text-gray-900">Garmin HRM-Pro</h3>
<div class="flex items-center gap-2 mt-0.5">
<span class="text-[12px] text-gray-500">胸带式心率传感器</span>
<span class="text-[10px] bg-yellow-100 text-yellow-600 px-1.5 py-0.5 rounded-full font-medium">信号中</span>
</div>
</div>
</div>
<span class="iconify text-gray-300 text-xl" data-icon="heroicons:chevron-right-20-solid"></span>
</div>

<!-- Device 3 - Apple Watch -->
<div class="bg-white rounded-2xl p-4 shadow-sm flex items-center justify-between cursor-pointer active:scale-[0.98] transition-transform" onclick="selectDevice(this, 'apple-watch')">
<div class="flex items-center gap-4">
<div class="relative">
<div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center">
<span class="iconify text-gray-600 text-2xl" data-icon="heroicons:device-tablet-20-solid"></span>
</div>
<div class="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full flex items-center justify-center">
<span class="iconify text-white text-[8px]" data-icon="heroicons:signal-20-solid"></span>
</div>
</div>
<div>
<h3 class="font-semibold text-[16px] text-gray-900">Apple Watch Series 9</h3>
<div class="flex items-center gap-2 mt-0.5">
<span class="text-[12px] text-gray-500">智能手表</span>
<span class="text-[10px] bg-green-100 text-green-600 px-1.5 py-0.5 rounded-full font-medium">信号强</span>
</div>
</div>
</div>
<span class="iconify text-gray-300 text-xl" data-icon="heroicons:chevron-right-20-solid"></span>
</div>
</div>
</section>

<!-- Troubleshooting Tips -->
<section class="animate-slide-in" style="animation-delay: 0.3s;">
<div class="bg-amber-50 rounded-2xl p-4 border border-amber-100">
<div class="flex items-start gap-3">
<span class="iconify text-amber-500 text-xl mt-0.5 flex-shrink-0" data-icon="heroicons:light-bulb-20-solid"></span>
<div>
<p class="text-[13px] font-semibold text-amber-800 mb-2">找不到设备？</p>
<ul class="text-[12px] text-amber-700 space-y-1">
<li class="flex items-start gap-2">
<span class="iconify text-amber-500 mt-0.5 flex-shrink-0" data-icon="heroicons:check-20-solid"></span>
<span>确保设备已开启并处于配对模式</span>
</li>
<li class="flex items-start gap-2">
<span class="iconify text-amber-500 mt-0.5 flex-shrink-0" data-icon="heroicons:check-20-solid"></span>
<span>将设备靠近手机（1米内）</span>
</li>
<li class="flex items-start gap-2">
<span class="iconify text-amber-500 mt-0.5 flex-shrink-0" data-icon="heroicons:check-20-solid"></span>
<span>检查系统蓝牙是否已开启</span>
</li>
</ul>
</div>
</div>
</div>
</section>

<!-- Manual Entry -->
<section class="animate-slide-in" style="animation-delay: 0.4s;">
<button class="w-full py-4 bg-white rounded-2xl shadow-sm flex items-center justify-center gap-2 active:scale-[0.98] transition-transform" onclick="showManualEntry()">
<span class="iconify text-blue-500 text-xl" data-icon="heroicons:pencil-square-20-solid"></span>
<span class="text-[15px] font-medium text-gray-700">手动输入设备信息</span>
</button>
</section>
</main>

<!-- Pairing Sheet -->
<div class="absolute inset-0 z-40 invisible pointer-events-none transition-all duration-300" id="pairingSheet">
<div class="absolute inset-0 bg-black/40 opacity-0 transition-opacity duration-300" id="pairingOverlay" onclick="hidePairingSheet()"></div>
<div class="absolute bottom-0 w-full h-[55%] bg-white rounded-t-[24px] shadow-2xl translate-y-full transition-transform duration-300 flex flex-col overflow-hidden" id="pairingContent">
<div class="h-1.5 w-10 bg-gray-300 rounded-full mx-auto mt-3"></div>
<!-- Pairing States -->
<div class="flex-1 flex flex-col items-center justify-center px-6 py-8" id="pairingState">
<!-- State: Connecting -->
<div class="text-center" id="stateConnecting">
<div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6 relative">
<span class="iconify text-blue-500 text-4xl animate-pulse" data-icon="heroicons:cpu-chip-20-solid"></span>
<div class="absolute inset-0 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
</div>
<h3 class="text-[20px] font-bold text-gray-900 mb-2">正在连接...</h3>
<p class="text-[14px] text-gray-500 mb-1" id="connectingDevice">Polar H10</p>
<p class="text-[12px] text-gray-400">请稍候，正在建立连接</p>
</div>
</div>
<!-- Cancel Button -->
<div class="px-6 pb-8">
<button class="w-full py-4 bg-gray-100 rounded-2xl text-[16px] font-semibold text-gray-600 active:bg-gray-200 transition-colors" onclick="cancelPairing()">取消配对</button>
</div>
</div>
</div>

<!-- Success Sheet -->
<div class="absolute inset-0 z-50 invisible pointer-events-none transition-all duration-300" id="successSheet">
<div class="absolute inset-0 bg-black/40 opacity-0 transition-opacity duration-300" id="successOverlay"></div>
<div class="absolute bottom-0 w-full h-[60%] bg-white rounded-t-[24px] shadow-2xl translate-y-full transition-transform duration-300 flex flex-col overflow-hidden" id="successContent">
<div class="h-1.5 w-10 bg-gray-300 rounded-full mx-auto mt-3"></div>
<div class="flex-1 flex flex-col items-center justify-center px-6 py-8">
<!-- Success Animation -->
<div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
<span class="iconify text-green-500 text-5xl" data-icon="heroicons:check-circle-20-solid"></span>
</div>
<h3 class="text-[22px] font-bold text-gray-900 mb-2">配对成功!</h3>
<p class="text-[14px] text-gray-500 mb-2" id="successDevice">Polar H10</p>
<p class="text-[13px] text-gray-400 text-center mb-6">设备已成功连接，现在可以开始监测心率</p>
<!-- Device Info -->
<div class="w-full bg-gray-50 rounded-2xl p-4 space-y-3">
<div class="flex justify-between">
<span class="text-[13px] text-gray-500">设备类型</span>
<span class="text-[13px] font-medium text-gray-900">胸带式心率传感器</span>
</div>
<div class="flex justify-between">
<span class="text-[13px] text-gray-500">信号强度</span>
<span class="text-[13px] font-medium text-green-600">极佳</span>
</div>
<div class="flex justify-between">
<span class="text-[13px] text-gray-500">电池电量</span>
<span class="text-[13px] font-medium text-gray-900">84%</span>
</div>
</div>
</div>
<div class="px-6 pb-8 space-y-3">
<button class="w-full py-4 bg-blue-500 rounded-2xl text-[16px] font-semibold text-white active:bg-blue-600 transition-colors" onclick="startMonitoring()">开始监测</button>
<button class="w-full py-3 text-[14px] font-medium text-gray-500" onclick="goToDeviceSettings()">前往设备设置</button>
</div>
</div>
</div>

<!-- Toast -->
<div class="absolute bottom-24 left-1/2 -translate-x-1/2 bg-gray-900/90 text-white text-[14px] px-5 py-2.5 rounded-full font-medium opacity-0 transition-opacity pointer-events-none" id="toast">
已取消配对
</div>

<!-- Home Indicator -->
<div class="absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-black rounded-full"></div>
</div>
<script>
    // 设备选择
    function selectDevice(element, deviceId) {
      const deviceNames = {
        'polar-h10': 'Polar H10',
        'garmin-hrm': 'Garmin HRM-Pro',
        'apple-watch': 'Apple Watch Series 9'
      };

      document.getElementById('connectingDevice').textContent = deviceNames[deviceId];
      document.getElementById('successDevice').textContent = deviceNames[deviceId];
      showPairingSheet();

      // 模拟配对过程
      setTimeout(() => {
        hidePairingSheet();
        setTimeout(() => {
          showSuccessSheet();
        }, 300);
      }, 2500);
    }

    // 显示配对Sheet
    function showPairingSheet() {
      const sheet = document.getElementById('pairingSheet');
      const overlay = document.getElementById('pairingOverlay');
      const content = document.getElementById('pairingContent');

      sheet.classList.remove('invisible');
      sheet.classList.add('pointer-events-auto');
      overlay.classList.remove('opacity-0');
      overlay.classList.add('opacity-100');
      content.classList.remove('translate-y-full');
      content.classList.add('translate-y-0');
    }

    // 隐藏配对Sheet
    function hidePairingSheet() {
      const sheet = document.getElementById('pairingSheet');
      const overlay = document.getElementById('pairingOverlay');
      const content = document.getElementById('pairingContent');

      overlay.classList.remove('opacity-100');
      overlay.classList.add('opacity-0');
      content.classList.remove('translate-y-0');
      content.classList.add('translate-y-full');

      setTimeout(() => {
        sheet.classList.add('invisible');
        sheet.classList.remove('pointer-events-auto');
      }, 300);
    }

    // 显示成功Sheet
    function showSuccessSheet() {
      const sheet = document.getElementById('successSheet');
      const overlay = document.getElementById('successOverlay');
      const content = document.getElementById('successContent');

      sheet.classList.remove('invisible');
      sheet.classList.add('pointer-events-auto');
      overlay.classList.remove('opacity-0');
      overlay.classList.add('opacity-100');
      content.classList.remove('translate-y-full');
      content.classList.add('translate-y-0');
    }

    // 隐藏成功Sheet
    function hideSuccessSheet() {
      const sheet = document.getElementById('successSheet');
      const overlay = document.getElementById('successOverlay');
      const content = document.getElementById('successContent');

      overlay.classList.remove('opacity-100');
      overlay.classList.add('opacity-0');
      content.classList.remove('translate-y-0');
      content.classList.add('translate-y-full');

      setTimeout(() => {
        sheet.classList.add('invisible');
        sheet.classList.remove('pointer-events-auto');
      }, 300);
    }

    // 取消配对
    function cancelPairing() {
      hidePairingSheet();
      showToast('已取消配对');
    }

    // 开始监测
    function startMonitoring() {
      window.location.href = '1-today.html';
    }

    // 前往设备设置
    function goToDeviceSettings() {
      window.location.href = '2-device.html';
    }

    // 筛选设备
    function filterDevices(type) {
      // 更新按钮状态
      document.querySelectorAll('.flex.gap-2 button').forEach(btn => {
        btn.classList.remove('bg-blue-500', 'text-white');
        btn.classList.add('bg-white', 'text-gray-600');
      });
      event.target.classList.remove('bg-white', 'text-gray-600');
      event.target.classList.add('bg-blue-500', 'text-white');
      showToast('筛选：' + type);
    }

    // 手动输入
    function showManualEntry() {
      showToast('手动输入设备信息');
    }

    // Toast提示
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.remove('opacity-0');
      setTimeout(() => {
        toast.classList.add('opacity-0');
      }, 1500);
    }
  </script>
</body>
</html>
